# 变量

## 概述

在设置属性信息，或编写脚本时，可以引用变量来实现动态变化的效果，变量包括了平台内置变量及自定义的变量。



### 变量使用

#### 获取变量值 

变更取值格式为：$gl.变量名.属性

##### 平台变量使用

 **`$gl.app.id`** 获取应用ID

 **`$gl.page.组件id.value`** 获取组件值，在多页面嵌套时，若存在多个相同的页面引用（不同页面存在多个相同id的组件），在组件id重复时，此方式获取的是最先渲染页面的组件id，若组件id不重复，则没有影响，类似单页面无页面嵌套引用的场景。

 **`$gl.pages.页面id.组件id.value`** 获取组件值，在多页面嵌套且同一页面重复使用时，通过页面id进行区分，访问指定页面属性值

 **`$gl.pages.页面id.组件id.props.xxx`** 获取组件的属性值，在多页面嵌套且同一页面重复使用时，通过页面id进行区分，访问指定页面属性值



##### 自定义变量使用

自定义的变量在vars下

 **`$gl.page.组件id.props.xxx`** 获取组件的属性值



#### 设置变量值

部分变量为只读变量，不可以设置值，



### 平台内置变量
- user 当前用户

- platform

- app 应用

  - id

  - name

  - code

- page 页面，当前的页面，不涉及嵌套页面

  - 页面id

  - params

    作用于事件编排时，打开窗口传参
  
  - 页面组件引用
  
      获取当前页面组内的组件引用 **`$gl.page.组件id`**
  
      获取当前页面组内的组件值 **`$gl.page.组件id.value`**
  
  - xxx
  
  page.idxxx
  
  
  
- pages 嵌套页面

- com 当前登录的设备

- device 当前登录的设备

- ctx 上下文信息
  - 表格的行
  - 循环

- args 事件触发时的参数

- url 当前url信息

  - params  

    例如：```http://localhost:8000/p?appId=1&pageId=2```

  ​       params为{appId:1,pageId}



### 自定义变量

自定义变量vars

可在vars下设置具体的变量，变量的名称、类型、作用域、默认值等，详细如下表。

|   参数   | 参数说明                                                                                                          |
| :------: |:--------------------------------------------------------------------------------------------------------------|
|  变量名  | 变量唯一的名称，可用于变量引用。                                                                                              |
| 变量类型 | 支持选择文本（String）、数字（Number）、布尔值（Boolean）、数组（Array）、对象（Object）。                                                  |
| 变量结构 | 变量类型为数组或对象时，选择数据的字段结构。                                                                                        |
|  初始值  | 变量的初始值,不同数据类型存在不同的初始值写法，示例如下：String：testNumber：123456、Boolean：falseArray：[1，2，3]、Objects:\{key:"test",val:2\} |
|  作用域  | 选择变量生效的作用域，包括全局、应用级、页面级、事件方法级。                                                                                |
|   备注   | 变量的使用说明，根据使用场景自定义填写                                                                                           |

